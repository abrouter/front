{"version":3,"sources":["http/httpRequest.js","http/createAccount.js","components/Locales.js","http/login.js","containers/Sign.js","components/App.js","index.js"],"names":["httpRequest","url","method","body","fetch","window","api","credentials","JSON","stringify","then","response","status","error","Error","json","createAccount","username","password","locales","login","Sign","props","state","mode","submitHandle","bind","urlParams","URLSearchParams","location","search","email","get","this","message","event","preventDefault","document","getElementById","style","display","value","token","data","attributes","href","catch","loginHttp","setTimeout","forceUpdate","e","target","className","id","role","onSubmit","for","type","placeholder","onChange","handleOnChange","toUpperCase","React","Component","console","log","App","render"],"mappings":"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","file":"static/js/main.4b22a760.chunk.js","sourcesContent":["function httpRequest(url, method, body) {\n    return fetch(window.api + url, {\n        credentials: 'include',\n        'method': method,\n        credentials: 'omit',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n        },\n        body: JSON.stringify(body),\n      })\n      .then(response => {\n\n        if (response.status !== 200 && response.status !== 201) {\n          let error = (new Error('Request failed'));\n          error.json = response.json();\n          throw error; \n        }\n\n        return response.json()\n      }\n      );\n}\n\nexport default httpRequest;\n","import httpRequest from './httpRequest';\n\nfunction createAccount(username, password) {\n    return httpRequest('users', 'POST', \n    {\n        \"data\" :{\n            \"type\": \"users\",\n            \"attributes\": {\n               \"username\": username,\n               \"password\": password\n            }\n        }\n    });\n}\n\nexport default createAccount;\n","let locales = {\n    'SIGNUP_BUTTON': \"Sign up\",\n    \"SIGNIN_BUTTON\": 'Sign in',\n};\n\nexport default locales;\n","import httpRequest from './httpRequest';\n\nfunction login(login, password) {\n    return httpRequest('auth', 'POST', {\n        \"data\": {\n            \"type\":\"auth-request\",\n            \"attributes\": {\n                \"username\": login,\n                \"password\": password,\n            }\n        }    \n    });\n}\n\nexport default login;\n","import React from 'react';\nimport createAccount from '../http/createAccount';\nimport locales from '../components/Locales';\nimport loginHttp from '../http/login';\n\nclass Sign extends React.Component {\n    state = {\n    }\n\n    componentDidMount() {\n        this.message = '';\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.mode = this.props.mode;\n        this.submitHandle = this.submitHandle.bind(this);\n        const urlParams = new URLSearchParams(window.location.search);\n        this.state.email = urlParams.get('email');\n\n    }\n    \n    submitHandle(event) \n    {\n        event.preventDefault();\n        document.getElementById('message').style.display = 'none';\n        let login = document.getElementById('login').value;\n        let password = document.getElementById('password').value;\n        \n        if (this.mode === 'signup') {\n            createAccount(login, password).then(response => {\n                let token = response.data.attributes.token;\n                window.location.href = '/en/redirect?token='+token + '&to=/en/board?signup_conversion=1';\n            }).catch(error => error.json.then(data => this.error(data.data.attributes.message)));\n        } else {\n            loginHttp(login, password).then(response => {\n                let token = response.data.attributes.token;\n                window.location.href = '/en/redirect?token='+token + '&to=/en/board';\n            }).catch(error => this.error('Invalid credentials'));\n        }   \n    }\n\n    error(message) {\n        setTimeout(function () {\n            document.getElementById('message').style = 'dispaly:block';\n        }, 200);\n        this.message = message;\n        this.forceUpdate();\n    }\n\n    handleOnChange(e) {\n        this.state.email = e.target.value;\n        this.forceUpdate();\n    }\n\n    render() {\n        let none = {'display':'none'};\n\n\n        return (\n            <div>\n                <div className=\"alert alert-warning\" id=\"message\" style={none} role=\"alert\">{this.message}</div>\n\n                <form onSubmit={this.submitHandle}>\n                   <div className=\"form-group\">\n                    <label for=\"login\">Email address</label>\n                        <input type=\"text\" className=\"form-control\" id=\"login\" value={this.state.email} placeholder=\"Email\" onChange={this.handleOnChange.bind(this)}/>\n                    </div>\n                    <div className=\"form-group\">\n                    <label for=\"password\">Password</label>\n                        <input type=\"password\"  className=\"form-control\" id=\"password\" placeholder=\"Password\"/>\n                    </div>\n                    <input id=\"proceed\"  type=\"submit\" className=\"btn btn-primary\" value={locales[this.mode.toUpperCase() + '_BUTTON']}/>\n                </form>\n                <div className=\"mt-2\" id=\"buttonDiv\"/>\n            </div>\n    )\n        ;\n    }\n}\nexport default Sign\n","import React from 'react'\nimport Sign from '../containers/Sign'\n\nconsole.log(window.mode);\nconst App = () => (\n  <div>\n    <Sign mode={window.mode}/>\n  </div>\n)\n\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\nimport App from './components/App'\n\nif (!window.api) {\n  window.api = 'http://localhost:904/api/v1/';\n}\n\nrender(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}