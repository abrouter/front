(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(5),r=n(6),i=n(7),c=n(2),d=n(9),l=n(8),u=n(3);var m=function(e,t,n){var a;return fetch(window.api+e,(a={credentials:"include",method:t},Object(u.a)(a,"credentials","omit"),Object(u.a)(a,"headers",{"Content-Type":"application/json",Accept:"application/json"}),Object(u.a)(a,"body",JSON.stringify(n)),a)).then((function(e){if(200!==e.status&&201!==e.status){var t=new Error("Request failed");throw t.json=e.json(),t}return e.json()}))};var h=function(e,t){return m("users","POST",{data:{type:"users",attributes:{username:e,password:t}}})},p={SIGNUP_BUTTON:"Sign up",SIGNIN_BUTTON:"Sign in"};var b=function(e,t){return m("auth","POST",{data:{type:"auth-request",attributes:{username:e,password:t}}})},j=n(0),f=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).state={},a.mode=a.props.mode,a.submitHandle=a.submitHandle.bind(Object(c.a)(a));var s=new URLSearchParams(window.location.search);return a.state.email=s.get("email"),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.message=""}},{key:"submitHandle",value:function(e){var t=this;e.preventDefault(),document.getElementById("message").style.display="none";var n=document.getElementById("login").value,a=document.getElementById("password").value;"signup"===this.mode?h(n,a).then((function(e){var t=e.data.attributes.token;window.location.href="/en/redirect?token="+t+"&to=/en/board?signup_conversion=1"})).catch((function(e){return e.json.then((function(e){return t.error(e.data.attributes.message)}))})):b(n,a).then((function(e){var t=e.data.attributes.token;window.location.href="/en/redirect?token="+t+"&to=/en/board"})).catch((function(e){return t.error("Invalid credentials")}))}},{key:"error",value:function(e){setTimeout((function(){document.getElementById("message").style="dispaly:block"}),200),this.message=e,this.forceUpdate()}},{key:"handleOnChange",value:function(e){this.state.email=e.target.value,this.forceUpdate()}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"alert alert-warning",id:"message",style:{display:"none"},role:"alert",children:this.message}),Object(j.jsxs)("form",{onSubmit:this.submitHandle,children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{for:"login",children:"Email address"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"login",value:this.state.email,placeholder:"Email",onChange:this.handleOnChange.bind(this)})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{for:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password"})]}),Object(j.jsx)("input",{id:"proceed",type:"submit",className:"btn btn-primary",value:p[this.mode.toUpperCase()+"_BUTTON"]})]}),Object(j.jsx)("div",{className:"mt-2",id:"buttonDiv"})]})}}]),n}(s.a.Component);console.log(window.mode);var v=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(f,{mode:window.mode})})};window.api||(window.api="http://localhost:904/api/v1/"),Object(o.render)(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.64f95d9c.chunk.js.map